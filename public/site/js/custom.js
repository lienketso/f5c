function load_ajax(a){var b=jQuery(a).attr("_field"),c=jQuery(a).attr("_url");return jQuery(a).nstUI({method:"loadAjax",loadAjax:{url:c,field:{load:b+"_load",show:b+"_show"}}}),!1}function temp_set_value(a,b){return jQuery.each(b,function(b,c){var d=new RegExp("{"+b+"}","igm");a=a.replace(d,c)}),a}function copy_value(a,b){jQuery(this).nstUI({method:"copyValue",copyValue:{from:a,to:b}})}function lightbox(a){jQuery(a).nstUI({method:"lightbox"})}function auto_check_pages(a){void 0==a.find("a")[0]&&a.remove()}function load_account_panel(){jQuery(this).nstUI({method:"loadAjax",loadAjax:{url:site_url+"user/account_panel",field:{load:"_",show:"account_panel"}}})}function load_cart(){$.ajax({url:$(".load_cart").attr("_url"),type:"POST",success:function(a){"undefined"!=a.cart_total&&$(".load_cart").html(a.cart_total)}})}function load_favorite(){$.ajax({url:$(".load_favorite").attr("_url"),type:"POST",data:"load_ajax=1",success:function(a){"undefined"!=a.favorite_total&&$(".load_favorite").html(a.favorite_total)}})}function add_favorite(a){$(this).nstUI({method:"loadAjax",loadAjax:{url:$(".add_favorite").attr("_url"),data:"act=add&id="+a,field:{load:"",show:""},event_complete:function(a){a=jQuery.parseJSON(a),a.msg?alert(a.msg):alert("Đã thêm sản phẩm này vào ưu thích")}}})}function setLocation(a){window.location=a}function add_compare(a){$(this).nstUI({method:"loadAjax",loadAjax:{url:site_url+"product/add_compare.html",data:"id="+a,field:{load:"",show:""},event_complete:function(){window.location=site_url+"so-sanh.html"}}})}function change_captcha(a){var b=jQuery("#"+a),c=b.attr("_captcha")+"?id="+Math.random();return b.attr("src",c),!1}function widget_call(a,b){b=void 0==b||b,jQuery("#widget_"+a+" .widget_load a").click(function(){var c=jQuery(this).attr("href");return widget_load(a,c,b),!1})}function widget_load(a,b,c){jQuery(this).nstUI({method:"loadAjax",loadAjax:{url:b,field:{load:"",show:"widget_"+a},event_complete:function(a,b){c&&jQuery.scrollTo("#"+b.field.show,800)}}})}function number_format(a,b,c,d){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+a)?+a:0,f=isFinite(+b)?Math.abs(b):0,g="undefined"==typeof d?",":d,h="undefined"==typeof c?".":c,i="",j=function(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c};return i=(f?j(e,f):""+Math.round(e)).split("."),i[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g)),(i[1]||"").length<f&&(i[1]=i[1]||"",i[1]+=new Array(f-i[1].length+1).join("0")),i.join(h)}function str_replace(a,b,c,d){var e=0,f=0,g="",h="",i=0,j=0,k=[].concat(a),l=[].concat(b),m=c,n="[object Array]"===Object.prototype.toString.call(l),o="[object Array]"===Object.prototype.toString.call(m);for(m=[].concat(m),d&&(this.window[d]=0),e=0,i=m.length;e<i;e++)if(""!==m[e])for(f=0,j=k.length;f<j;f++)g=m[e]+"",h=n?void 0!==l[f]?l[f]:"":l[0],m[e]=g.split(k[f]).join(h),d&&m[e]!==g&&(this.window[d]+=(g.length-m[e].length)/k[f].length);return o?m:m[0]}!function(a){a(document).ready(function(){a(".hideit").click(function(){a(this).fadeOut()}),a(".lightbox").nstUI({method:"lightbox"}),a(".form_action").each(function(){a(this).nstUI({method:"formAction",formAction:{field_load:a(this).attr("_field_load")}})}),a(".verify_action").nstUI({method:"verifyAction"}),a("[_tooltip]").nstUI({method:"tooltip"}),a("[_dropdown]").nstUI({method:"dropdown"}),a("input.placeholder").nstUI({method:"placeholder"}),a(".accordion").each(function(){var b=a(this);b.nstUI({method:"accordion",accordion:{type:b.attr("_accordion_type")}})}),a(".auto_check_pages").each(function(){auto_check_pages(a(this))}),a(".datepicker").each(function(){var b={defaultDate:7,autoSize:!0,dateFormat:"dd-mm-yy",changeMonth:!0,changeYear:!0,yearRange:"1975",minDate:0},c=a(this).attr("_config");c=c?JSON.parse(c):{};a.extend({},b,c);a(this).datepicker(b)}),a(".format_currency").formatCurrency({roundToDecimalPlace:0,symbol:""}),a(".format_currency").blur(function(){a(this).formatCurrency({roundToDecimalPlace:0,symbol:""})});var c,b={};a(".autocomplete").each(function(){var d=a(this).attr("_url");a(this).autocomplete({minLength:2,source:function(e,f){var g=e.term;return g in b?void f(b[g]):void(c=a.getJSON(d,e,function(a,d,e){b[g]=a,e===c&&f(a)}))}})}),a(".change_city").change(function(){return a(this).nstUI({method:"loadAjax",loadAjax:{url:a(this).attr("_url")+a(this).val(),field:{load:"",show:""},event_complete:function(){window.location.reload()}}}),!1}),a(".change_lang").click(function(){return a(this).nstUI({method:"loadAjax",loadAjax:{url:a(this).attr("_url"),field:{load:"",show:""},event_complete:function(){window.location.reload()}}}),!1}),a(".change_currency").change(function(){return a(this).nstUI({method:"loadAjax",loadAjax:{url:a(this).val(),field:{load:"",show:""},event_complete:function(){window.location.reload()}}}),!1}),load_cart(),load_favorite()})}(jQuery);